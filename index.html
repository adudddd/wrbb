<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Magical Christmas Binary Tree</title>
    <style>
        body { 
            margin: 0;
            overflow: hidden; 
            background: linear-gradient(to bottom, #000428, #004e92);
            font-family: 'Arial', sans-serif;
            color: white;
            user-select: none;
        }
        #controls {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            max-width: 250px;
        }
        .control-section {
            margin-bottom: 10px;
        }
        button {
            margin: 5px;
            padding: 5px 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        button:hover {
            transform: scale(1.05);
            background-color: #45a049;
        }
        #snowflakesCanvas, #treeCanvas {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        .symbol {
            font-size: 20px;
            cursor: pointer;
            margin: 5px;
            color: white;
            transition: transform 0.2s ease;
        }
        .symbol:hover {
            transform: scale(1.2);
            color: #ffd700; /* Gold highlight */
        }
    </style>
</head>
<body>
    <canvas id="snowflakesCanvas"></canvas>
    <canvas id="treeCanvas"></canvas>
    <div id="controls">
        <div class="control-section">
            <h3>Tree Color Controls</h3>
            <input type="text" id="characterInput" placeholder="Enter character (0/1/A/B)">
            <input type="color" id="colorPicker">
            <button onclick="changeColor()">Change Color</button>
        </div>
        <div class="control-section">
            <h3>Keyboard Symbol Ornaments</h3>
            <div id="symbolControls"></div>
            <button onclick="resetTree()">Reset Tree</button>
        </div>
        <div class="control-section">
            <h3>Effects</h3>
            <button onclick="toggleSnowfall()">Toggle Symbol Snowfall</button>
        </div>
    </div>

    <script>
        const treeCanvas = document.getElementById('treeCanvas');
        const ctx = treeCanvas.getContext('2d');
        const snowCanvas = document.getElementById('snowflakesCanvas');
        const snowCtx = snowCanvas.getContext('2d');
        const symbolControls = document.getElementById('symbolControls');

        const symbols = ['#', '*', '%', '@', '&', '+', '^'];
        const snowflakes = [];
        const ornaments = [];
        let isSnowfallActive = false;

        const treeData = [
            "        0",
            "       101",
            "      01010",
            "     101010101",
            "    0101010101010",
            "   10101010101010101",
            "  010101010101010101010",
            " 1010101010101010101010101",
            "0101010101010101010101010101",
            "       101",
            "       101"
        ];

        const colors = {
            '0': '#2ecc71',
            '1': '#e74c3c',
            'A': '#3498db',
            'B': '#f39c12'
        };

        function resizeCanvas() {
            treeCanvas.width = snowCanvas.width = window.innerWidth;
            treeCanvas.height = snowCanvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function drawTree() {
            ctx.clearRect(0, 0, treeCanvas.width, treeCanvas.height);
            const xCenter = treeCanvas.width / 2;
            const yStart = 50;
            const lineHeight = 25;

            treeData.forEach((row, i) => {
                let x = xCenter - (row.length * 10);
                const y = yStart + i * lineHeight;

                row.split('').forEach(char => {
                    if (char !== ' ') {
                        ctx.fillStyle = colors[char] || 'white';
                        ctx.fillText(char, x, y);
                    }
                    x += 20;
                });
            });

            ornaments.forEach(orn => {
                ctx.fillStyle = '#FFD700';
                ctx.fillText(orn.symbol, orn.x, orn.y);
            });
        }

        function placeSymbol(symbol) {
            const x = Math.random() * treeCanvas.width;
            const y = Math.random() * treeCanvas.height / 2 + 100;
            ornaments.push({ x, y, symbol });
            drawTree();
        }

        function generateSymbolControls() {
            symbols.forEach(sym => {
                const span = document.createElement('span');
                span.className = 'symbol';
                span.textContent = sym;
                span.onclick = () => placeSymbol(sym);
                symbolControls.appendChild(span);
            });
        }

        function createSnowflake() {
            return {
                x: Math.random() * window.innerWidth,
                y: 0,
                speed: Math.random() * 3 + 1,
                symbol: symbols[Math.floor(Math.random() * symbols.length)]
            };
        }

        function drawSnowflakes() {
            snowCtx.clearRect(0, 0, snowCanvas.width, snowCanvas.height);
            snowCtx.font = "20px Arial";
            snowCtx.fillStyle = "white";

            snowflakes.forEach((flake, index) => {
                snowCtx.fillText(flake.symbol, flake.x, flake.y);
                flake.y += flake.speed;
                if (flake.y > window.innerHeight) snowflakes.splice(index, 1);
            });

            if (isSnowfallActive) {
                if (Math.random() < 0.2) snowflakes.push(createSnowflake());
                requestAnimationFrame(drawSnowflakes);
            }
        }

        function toggleSnowfall() {
            isSnowfallActive = !isSnowfallActive;
            if (isSnowfallActive) drawSnowflakes();
        }

        function resetTree() {
            ornaments.length = 0;
            drawTree();
        }

        generateSymbolControls();
        drawTree();
    </script>
</body>
</html>
